<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Wake Up Light</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="https://weareoutman.github.io/clockpicker/dist/bootstrap-clockpicker.min.css" media="screen" title="no title" charset="utf-8">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/css/bootstrap2/bootstrap-switch.min.css" rel="stylesheet">
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://weareoutman.github.io/clockpicker/dist/bootstrap-clockpicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-switch/3.3.2/js/bootstrap-switch.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">WakeUpLight</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li><a href="/">Home</a></li>
            <li class="active"><a href="/alarm.html">Alarm</a></li>
            <li><a href="/light.html">Light</a></li>
            <li><a href="/settings.html">Settings</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container" style="margin-top: 50px;">

      <div class="starter-template">
        <span style="display: block;"><h1 style="display: inline-block;">Alarm page</h1><button class="btn btn-default pull-right pull-bottom" style="display: inline-block;margin-top: 20px;" onClick="postAlarms()">Save</button></span>


        <table class="table table-striped">

          <!-- MONDAY -->
          <tr>
            <td>Monday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="monday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="monday-alarm-enabled" class="toggle" checked>
            </td>
          </tr>

          <!-- TUESDAY -->
          <tr>
            <td>Tuesday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="tuesday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="tuesday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>

          <!-- WEDNESDAY -->
          <tr>
            <td>Wednesday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="wednesday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="wednesday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>

          <!-- THURSDAY -->
          <tr>
            <td>Thursday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="thursday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="thursday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>

          <!-- FRIDAY -->
          <tr>
            <td>Friday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="friday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="friday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>

          <!-- SATURDAY -->
          <tr>
            <td>Saturday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="saturday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="saturday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>

          <!-- SUNDAY -->
          <tr>
            <td>Sunday</td>
            <td>
              <div class="input-group clockpicker">
                  <input type="text" id="sunday-alarm" class="form-control" value="09:30">
                  <span class="input-group-addon">
                      <span class="glyphicon glyphicon-time"></span>
                  </span>
              </div>
            </td>
            <td align="right">
              <input type="checkbox" id="sunday-alarm-enabled" class="toggle" checked data-toggle="toggle">
            </td>
          </tr>
        </table>
      </div>

    </div><!-- /.container -->
  </body>
  <script type="text/javascript">
    $('.clockpicker').clockpicker({
      placement: "center",
      donetext: "Select",
      autoclose: true
    });

    $('.toggle').bootstrapSwitch();

    $.getJSON("api/alarms", function(data) {
      $('#monday-alarm').val(data["monday"]["time"]);
      $('#tuesday-alarm').val(data["tuesday"]["time"]);
      $('#wednesday-alarm').val(data["wednesday"]["time"]);
      $('#thursday-alarm').val(data["thursday"]["time"]);
      $('#friday-alarm').val(data["friday"]["time"]);
      $('#saturday-alarm').val(data["saturday"]["time"]);
      $('#sunday-alarm').val(data["sunday"]["time"]);

      $('#monday-alarm-enabled').bootstrapSwitch('state', data["monday"]["enabled"]);
      $('#tuesday-alarm-enabled').bootstrapSwitch('state', data["tuesday"]["enabled"]);
      $('#wednesday-alarm-enabled').bootstrapSwitch('state', data["wednesday"]["enabled"]);
      $('#thursday-alarm-enabled').bootstrapSwitch('state', data["thursday"]["enabled"]);
      $('#friday-alarm-enabled').bootstrapSwitch('state', data["friday"]["enabled"]);
      $('#saturday-alarm-enabled').bootstrapSwitch('state', data["saturday"]["enabled"]);
      $('#sunday-alarm-enabled').bootstrapSwitch('state', data["sunday"]["enabled"]);
    });

    function postAlarms() {
      var alarms = {};
      alarms["monday"] = {};
      alarms["monday"]["time"] = $('#monday-alarm').val();
      alarms["monday"]["enabled"] = $('#monday-alarm-enabled').is(":checked");
      alarms["tuesday"] = {};
      alarms["tuesday"]["time"] = $('#tuesday-alarm').val();
      alarms["tuesday"]["enabled"] = $('#tuesday-alarm-enabled').is(":checked");
      alarms["wednesday"] = {};
      alarms["wednesday"]["time"] = $('#wednesday-alarm').val();
      alarms["wednesday"]["enabled"] = $('#wednesday-alarm-enabled').is(":checked");
      alarms["thursday"] = {};
      alarms["thursday"]["time"] = $('#thursday-alarm').val();
      alarms["thursday"]["enabled"] = $('#thursday-alarm-enabled').is(":checked");
      alarms["friday"] = {};
      alarms["friday"]["time"] = $('#friday-alarm').val();
      alarms["friday"]["enabled"] = $('#friday-alarm-enabled').is(":checked");
      alarms["saturday"] = {};
      alarms["saturday"]["time"] = $('#saturday-alarm').val();
      alarms["saturday"]["enabled"] = $('#saturday-alarm-enabled').is(":checked");
      alarms["sunday"] = {};
      alarms["sunday"]["time"] = $('#sunday-alarm').val();
      alarms["sunday"]["enabled"] = $('#sunday-alarm-enabled').is(":checked");
      $.ajax({
        type: "POST",
        url: "api/alarms",
        data: JSON.stringify(alarms),
        contentType: "application/json; charset=utf-8",
        dataType   : "json"
      });
      console.log(alarms);
    }
  </script>
</html>
